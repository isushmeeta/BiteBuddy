{"ast":null,"code":"// // src/pages/OrderHistory.jsx\n// import React, { useEffect, useState } from \"react\";\n// import axios from \"axios\";\n// import OrderCard from \"../components/OrderCard\";\n// import \"./OrderHistory.css\";\n\n// export default function OrderHistory() {\n//   const [orders, setOrders] = useState([]);\n//   const [loading, setLoading] = useState(true);\n\n//   // TODO: replace with actual logged-in user id later\n//   const userId = \"USER001\";\n\n//   useEffect(() => {\n//     const fetchOrders = async () => {\n//       try {\n//         const res = await axios.get(`http://localhost:9169/api/orders/${userId}`);\n//         // depending on your backend the response may be array or object; handle both:\n//         setOrders(Array.isArray(res.data) ? res.data : res.data.orders || []);\n//       } catch (err) {\n//         console.error(\"Failed to fetch orders:\", err);\n//         setOrders([]);\n//       } finally {\n//         setLoading(false);\n//       }\n//     };\n\n//     fetchOrders();\n//   }, []);\n\n//   // attempts reorder using multiple possible endpoints (safe fallback)\n//   const handleReorder = async (order) => {\n//     try {\n//       // try variant 1: POST /api/orders/reorder/:orderId\n//       await axios.post(`http://localhost:9169/api/orders/reorder/${order._id}`);\n//       alert(\"Reorder placed (method 1).\");\n//       return;\n//     } catch (e1) {\n//       // fallback 2: POST /api/orders/:id/reorder\n//       try {\n//         await axios.post(`http://localhost:9169/api/orders/${order._id}/reorder`);\n//         alert(\"Reorder placed (method 2).\");\n//         return;\n//       } catch (e2) {\n//         // fallback 3: POST /api/orders/reorder with previousOrderId body\n//         try {\n//           await axios.post(`http://localhost:9169/api/orders/reorder`, {\n//             previousOrderId: order._id,\n//           });\n//           alert(\"Reorder placed (method 3).\");\n//           return;\n//         } catch (e3) {\n//           console.error(\"Reorder failed (all attempts):\", e1, e2, e3);\n//           alert(\"Reorder failed. Check console and backend.\");\n//         }\n//       }\n//     }\n//   };\n\n//   return (\n//     <div className=\"order-history\" style={{ backgroundColor: \"#B197A4\", minHeight: \"100vh\", padding: \"20px\" }}>>\n//       <div className=\"max-w-6xl mx-auto\">\n//         <h1 className=\"text-3xl font-bold mb-6 text-black\">ORDER HISTORY</h1>\n\n//         {loading ? (\n//           <p className=\"text-lg text-gray-800\">Loading orders...</p>\n//         ) : orders.length === 0 ? (\n//           <p className=\"text-lg text-gray-800\">No orders found.</p>\n//         ) : (\n//           <div className=\"space-y-6\">\n//             {orders.map((order) => (\n//               <OrderCard key={order._id} order={order} onReorder={() => handleReorder(order)} />\n//             ))}\n//           </div>\n//         )}\n//       </div>\n//     </div>\n//   );\n// }","map":{"version":3,"names":[],"sources":["C:/Users/ASUS/cse471_lab_project/frontend/src/pages/OrderHistory.jsx"],"sourcesContent":["// // src/pages/OrderHistory.jsx\r\n// import React, { useEffect, useState } from \"react\";\r\n// import axios from \"axios\";\r\n// import OrderCard from \"../components/OrderCard\";\r\n// import \"./OrderHistory.css\";\r\n\r\n// export default function OrderHistory() {\r\n//   const [orders, setOrders] = useState([]);\r\n//   const [loading, setLoading] = useState(true);\r\n\r\n//   // TODO: replace with actual logged-in user id later\r\n//   const userId = \"USER001\";\r\n\r\n//   useEffect(() => {\r\n//     const fetchOrders = async () => {\r\n//       try {\r\n//         const res = await axios.get(`http://localhost:9169/api/orders/${userId}`);\r\n//         // depending on your backend the response may be array or object; handle both:\r\n//         setOrders(Array.isArray(res.data) ? res.data : res.data.orders || []);\r\n//       } catch (err) {\r\n//         console.error(\"Failed to fetch orders:\", err);\r\n//         setOrders([]);\r\n//       } finally {\r\n//         setLoading(false);\r\n//       }\r\n//     };\r\n\r\n//     fetchOrders();\r\n//   }, []);\r\n\r\n//   // attempts reorder using multiple possible endpoints (safe fallback)\r\n//   const handleReorder = async (order) => {\r\n//     try {\r\n//       // try variant 1: POST /api/orders/reorder/:orderId\r\n//       await axios.post(`http://localhost:9169/api/orders/reorder/${order._id}`);\r\n//       alert(\"Reorder placed (method 1).\");\r\n//       return;\r\n//     } catch (e1) {\r\n//       // fallback 2: POST /api/orders/:id/reorder\r\n//       try {\r\n//         await axios.post(`http://localhost:9169/api/orders/${order._id}/reorder`);\r\n//         alert(\"Reorder placed (method 2).\");\r\n//         return;\r\n//       } catch (e2) {\r\n//         // fallback 3: POST /api/orders/reorder with previousOrderId body\r\n//         try {\r\n//           await axios.post(`http://localhost:9169/api/orders/reorder`, {\r\n//             previousOrderId: order._id,\r\n//           });\r\n//           alert(\"Reorder placed (method 3).\");\r\n//           return;\r\n//         } catch (e3) {\r\n//           console.error(\"Reorder failed (all attempts):\", e1, e2, e3);\r\n//           alert(\"Reorder failed. Check console and backend.\");\r\n//         }\r\n//       }\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"order-history\" style={{ backgroundColor: \"#B197A4\", minHeight: \"100vh\", padding: \"20px\" }}>>\r\n//       <div className=\"max-w-6xl mx-auto\">\r\n//         <h1 className=\"text-3xl font-bold mb-6 text-black\">ORDER HISTORY</h1>\r\n\r\n//         {loading ? (\r\n//           <p className=\"text-lg text-gray-800\">Loading orders...</p>\r\n//         ) : orders.length === 0 ? (\r\n//           <p className=\"text-lg text-gray-800\">No orders found.</p>\r\n//         ) : (\r\n//           <div className=\"space-y-6\">\r\n//             {orders.map((order) => (\r\n//               <OrderCard key={order._id} order={order} onReorder={() => handleReorder(order)} />\r\n//             ))}\r\n//           </div>\r\n//         )}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}